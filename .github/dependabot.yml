# Dependabot configuration for vulnerable-node demo
# Uses multi-ecosystem-groups to consolidate PRs across directories & ecosystems
# If the same vulnerable package exists in root + subdirectories, ONE PR fixes all

version: 2

multi-ecosystem-groups:
  # All Node.js dependencies across root + all subdirectories in one PR
  all-node-deps:
    schedule:
      interval: "daily"
    labels: ["dependencies", "npm"]
    commit-message:
      prefix: "deps"
      include: "scope"

  # All Python dependencies grouped together
  all-python-deps:
    schedule:
      interval: "daily"
    labels: ["dependencies", "python"]
    commit-message:
      prefix: "deps"
      include: "scope"

  # All Docker updates grouped together
  all-docker:
    schedule:
      interval: "weekly"
    labels: ["dependencies", "docker"]

updates:
  # All npm projects across the entire repo â€” auto-discovers every package.json
  # Uses glob "/**" so new subdirectories are picked up automatically
  - package-ecosystem: "npm"
    directories:
      - "/**"
    patterns: ["*"]
    multi-ecosystem-group: "all-node-deps"

  # All Python requirements across the entire repo
  - package-ecosystem: "pip"
    directories:
      - "/**"
    patterns: ["*"]
    multi-ecosystem-group: "all-python-deps"

  # All Dockerfiles across the entire repo
  - package-ecosystem: "docker"
    directories:
      - "/**"
    patterns: ["*"]
    multi-ecosystem-group: "all-docker"
